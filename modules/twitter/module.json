{
  "name": "twitter",
  "version": "0.0.2",
  "namespace": "feedeater.twitter",
  "runtime": { "entry": "dist/runtime.js" },
  "queues": ["mod_twitter"],
  "jobs": [
    {
      "name": "collect",
      "queue": "mod_twitter",
      "schedule": "*/15 * * * *",
      "description": "Collect tweets from configured feeds (user timelines, home, lists, search) and persist into mod_twitter."
    },
    {
      "name": "updateContexts",
      "queue": "mod_twitter",
      "schedule": "*/30 * * * *",
      "description": "Refresh context summaries from recent tweets."
    }
  ],
  "settings": [
    { "key": "enabled", "type": "boolean", "default": true },
    {
      "key": "authMode",
      "type": "string",
      "default": "guest",
      "description": "Authentication mode: 'guest' (limited, no login) or 'user' (full access with login)"
    },
    {
      "key": "apiKey",
      "type": "string",
      "default": "",
      "description": "Rettiwt API key from browser extension (required for 'user' auth mode)"
    },
    {
      "key": "feedSources",
      "type": "string",
      "default": "[{\"type\":\"user\",\"username\":\"elonmusk\"}]",
      "description": "JSON array of feed sources. Types: user (username required), home (requires auth), list (listId required), search (query required)"
    },
    { "key": "tweetsPerRequest", "type": "number", "default": 20 },
    { "key": "lookbackHours", "type": "number", "default": 24 },
    { "key": "requestDelayMs", "type": "number", "default": 5000, "description": "Delay between feed requests to avoid rate limits" },
    {
      "key": "contextPrompt",
      "type": "string",
      "default": "You are summarizing a Twitter/X thread or conversation. Summarize ONLY the tweets provided. Do not make suggestions, ask questions, or add commentary. Return strict JSON with keys: summary_short and summary_long. summary_short must be <= 128 characters. summary_long should be 1-3 short paragraphs covering the main topic and key points."
    },
    {
      "key": "contextPromptFallback",
      "type": "string",
      "default": "Summarize ONLY the provided tweets in plain text. 1-3 short sentences. Do not return JSON. Do not make suggestions or ask questions."
    }
  ],
  "cards": [
    { "id": "twitterStatus", "title": "Twitter/X Collector" },
    { "id": "twitterFeeds", "title": "Configured Feeds" }
  ]
}
