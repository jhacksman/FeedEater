{
  "name": "youtube",
  "version": "0.0.1",
  "namespace": "feedeater.youtube",
  "runtime": { "entry": "dist/runtime.js" },
  "queues": ["mod_youtube"],
  "jobs": [
    {
      "name": "collect",
      "queue": "mod_youtube",
      "schedule": "0 * * * *",
      "description": "Collect YouTube videos from configured channels via RSS and persist into mod_youtube."
    },
    {
      "name": "updateContexts",
      "queue": "mod_youtube",
      "schedule": "0 */6 * * *",
      "description": "Refresh channel context summaries from recent YouTube videos."
    }
  ],
  "settings": [
    { "key": "enabled", "type": "boolean", "default": true },
    { "key": "collectionStrategy", "type": "string", "default": "rss", "description": "Collection strategy: rss (0 quota), api (rich data), or hybrid" },
    { "key": "channelIds", "type": "string", "required": true, "description": "Comma-separated list of YouTube channel IDs to monitor" },
    { "key": "syncSubscriptions", "type": "boolean", "default": false, "description": "Auto-fetch subscribed channels via OAuth (requires API credentials)" },
    { "key": "maxVideosPerChannel", "type": "number", "default": 15, "description": "Max videos to fetch per channel (RSS max is ~15)" },
    { "key": "lookbackDays", "type": "number", "default": 7, "description": "How far back to fetch videos (days)" },
    { "key": "fetchVideoDetails", "type": "boolean", "default": false, "description": "Fetch full video metadata via API (costs quota)" },
    { "key": "includeShorts", "type": "boolean", "default": true, "description": "Include YouTube Shorts in the feed" },
    { "key": "excludeLiveStreams", "type": "boolean", "default": false, "description": "Exclude live streams from the feed" },
    { "key": "checkIntervalMinutes", "type": "number", "default": 60, "description": "How often to check for new videos (minutes)" },
    { "key": "oauthCredentials", "type": "secret", "description": "OAuth 2.0 credentials JSON (from Google Cloud Console)" },
    { "key": "refreshToken", "type": "secret", "description": "OAuth refresh token (auto-populated after authorization)" },
    { "key": "apiKey", "type": "secret", "description": "API key for public data only (alternative to OAuth)" },
    {
      "key": "contextPrompt",
      "type": "string",
      "default": "You are summarizing recent YouTube videos from a channel. Summarize ONLY the videos provided. Return strict JSON with keys: summary_short and summary_long. summary_short must be <= 128 characters. summary_long should be 1-3 short paragraphs describing the channel's recent content themes."
    },
    {
      "key": "contextPromptFallback",
      "type": "string",
      "default": "Summarize ONLY the provided video titles in plain text. 1-3 short sentences. Do not return JSON."
    }
  ],
  "cards": [
    { "id": "youtubeStatus", "title": "YouTube Collector" },
    { "id": "youtubeChannels", "title": "YouTube Channels" }
  ]
}
